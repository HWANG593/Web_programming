# Django

## Django(장고) 프로그래밍



### 웹의 기본 이해

> 웹은 보통 **월드 와이드 웹(WWW)**이라고도 하며, 인터넷이라는 연결을 통해 여러 컴퓨터가 연결되어 서로 정보를 나누는 연결망들을 의미한다. 이 웹이라는 것을 어떤 관점에서 보냐에 따라 다음과 같은 개념이 생긴다.



#### 정보를 제공하는 컴퓨터와 정보를 받아가는 컴퓨터

* 서버(serever)  

  정보를 제공하기 위해 고정된 주소(도메인, 고정 IP 등)를 차지하며 방문하는 컴퓨터들에게 필요한 정보를 제공한다. 보통 우리가 접속하는 웹 사이트들이 이에 해당한다.  

* 클라이언트(clients)  

  정보를 제공받기 위해 서버를 찾아 접속하는 컴퓨터이다. 보통은 고정된 주소 없이 인터넷 연결을 통해 서버에 접근한다. 일반적으로 우리가 웹 브라우징을 위해 쓰고 있는 컴퓨터들이 이에 해당한다.



#### 웹 프로그램의 구조 별 개념

* 프론트엔드 (Front-end)

  **사용자들이 보는 화면의 모습을 결정**, 보통 HTML CSS JavaScript로 구성되고 클라이언트의 웹 브라우저에서 코드가 실행되거나 그려진다.  

* 백엔드 (Back-end)

  **사용자가 접속하면 그에 맞는 데이터를 보내주기 위해 여러가지 처리를 담당하는 로직을 구성**한다. Django기반의 Python이나 데이터베이스 등이 여기에 속한다.  프론트엔드 코드 조각들을 여기서 가지고 있다가, 사용자에게 적절하게 처리해서 보내주는 역할도 한다.



#### 서버 - 클라이언트 간통신 방향 별 개념

* 요청 (Request)

  **클라이언트가 서버로 원하는 정보를 받기 위해 필요한 정보를 보내는 과정**, 보통은 클라이언트의 IP와 접속하고 있는 브라우저 프로그램이나 모바일 여부, 요청하는 URL과 방식, 그리고 필요한 경우 서버가 처리하기 위한 데이터들을 보낸다.

* 응답 (Response)

  **요청을 받은 서버가 받은 데이터를 처리하여 사용자에게 정보를 내려주는 것**, 응답에는 여러가지 형태의 데이터가 내려갈 수 있는데, 우리가 보통 웹 사이트에 접속했을 때 보여지는 화면들은 응답에 HTML, CSS, JavaScript 코드가 포함되어 그걸 웹 브라우저가 해석하고 실행하여 화면에 그려주게 되는 케이스가 속한다.(JSON, XML 등)

  

---



### HTTP 프로토콜(통신 규약)



#### HTTP(Hypertext Transfer Protocol)

* 상호간에 정의한 규칙을 의미하며 특정 기기 간에 데이터를 주고받기 위해 정의
* "나는 이렇게 줄테니 넌 이렇게 받고 난 너가 준거 그렇게 받을게" - 규칙 정의
* 웹에서는 브라우저와 서버 간에 데이터를 주고받기 위한 방식으로 **HTTP 프로토콜**을 사용한다.



#### HTTP 프로토콜의 특징

* HTTP 프로토콜은 상태가 없는(stateless) 프로토콜이다.
* 즉, 데이터를 주고 받기 위한 각각의 데이터 요청이 서로 독집적으로 관리가 된다
* 이는 이전 데이터 요청과 다음 데이터 요청이 서로 관련이 없다는 것이다.
* 따라서 서버는 세션과 같은 별도의 추가 정보를 관리하지 않아도 되고, 다수의 요청 처리 및 서버의 부하를 줄일 수 있는 성능 상의 이점이 생긴다.
* HTTP 프로토콜은 일반적으로 TCP/IP 통신 위에서 동작하며 기본 포트는 **80**번이다.



#### HTTP Request & HTTP Response

* HTTP 프로토콜로 데이터를 주고받기 위해서는 Client는 Request를 보내고 Server에게서 Response를 받아야 한다.
* 요청과 응답을 이해하기 위해서는 클라이언트와 서버를 이해해야 한다.
* 클라이언트란 요청을 보내는 쪽을 의미하며 웹 관점에서는 브라우저를 의미한다.
* 서버란 요청을 받는 쪽을 의미하며 데이터를 보내주는 원격지의 컴퓨터를 의미한다.



#### URL(Uniform Resource Locators)

* URL은 **서버에 자원을 요청하기 위해 입력하는 영문 주소**이며 구조는 아래와 같다.
* http://www.domain.com:1234/path/to/resource?a=b&x=y
  * http : 프로토콜
  * www.domain.com : host
  * 1234 : 포트번호
  * path/to/resource : resource path 경로
    * resource path가 생략되면 기본파일(index.html)을 달라는 의미로 해석된다.
  * a=b&x=y : query



#### HTTP 요청 메서드

* 앞에서 살펴본 URL을 이용하면 서버에 특정 데이터를 요청할 수 있다. 여기서 요청하는 데이터에 특정 동작을 수행하고 싶으면 HTTP 요청 메서드(HTTP Request Methods)를 이용한다.

| 가                              | 나                                 |
| ------------------------------- | ---------------------------------- |
| GET : 존재하는 자원에 대한 요청 | PUT : 존재하는 자원에 대한 변경    |
| POST : 새로운 자원을 생성       | DELETE : 존재하는 자원에 대한 삭제 |



#### HTTP 상태 코드

* 2xx - 성공 , 3xx - 리다이렉션 , 4xx - 클라이언트 에러 , 5xx - 서버에러

  ​									HTTP Request(URL + 요청메서드)  ㅡ>

  ​			브라우저      																				서버

​									<ㅡ HTTP Response(상태 코드 + 응답 Body)



---



## Django(장고)

> 장고는 파이썬으로 작성된 **오픈 소스 웹 애플리케이션 프레임워크**로, 모델-뷰-컨트롤러 패턴을 따르고 있다.
>
> 고도의 데이터베이스 기반 웹사이트를 작성하는데 있어 수고를 더는 것이 주된 목표이다.



### 라이브러리와 프레임워크

#### 라이브러리(API)란

* **재사용이 필요한 기능으로 반복적인 코드 작성을 없애기 위해 언제든지 필요한 곳에서 호출하여 사용할 수 있도록 class나 Function으로 만들어진 것**
* 사용여부는 코드 작성자의 선택 사항이며 새로운 라이브러리 제작 시에도 엄격한 규칙은 없다.
* 프로그램 제작 시 필요한 기능이며 자동차로 치면 (바퀴, 헤드라이트, 에어백 등) 부품에 해당한다.



#### 프레임워크란

* 원하는 기능 구현에만 집중하여 빠르게 개발할 수 있도록 기본적으로 필요한 기능을 갖추고 있는 것으로 위에서 설명한 라이브러리가 포함되어 있다.
* **프레임워크만으로는 단독으로는 실행되지 않으며, 기능을 추가해야한다.**
* **프레임워크에 의존하여 개발해야하고, 프레임워크가 정의한 규칙을 준수해야 한다.**
* 프로그램 기본 구조(뼈대)역할이며 자동차로 치면 (자동차 프레임)에 해당한다



#### 장고 프로그램 개발 패턴

#### SW 개발 패턴 : **MVC(Model View Controller) 패턴**

>사용자 인터페이스로부터 비즈니스 로직을 분리하여  애플리케이션의 시각적인 요소나 그 이면에서 실행되는 비즈니스 로직을 서로 영향없이 쉽게 유지 보수할 수 있는 애플리케이션을 만들 수 있다.

* Model : 애플리케이션에서 처리하는 데이터 ( 처리 데이터 )
* View : 사용자 인터페이스 요소 ( 응답 로직 ) - HTML
* Controller : 데이터와 비즈니스 로직 사이의 상호동작을 관리 ( 요청 로직 ) - Python

 **ㅡ> 확장성과 유지보수성 향상**



#### 장고 프레임 워크 : **MTV(Model Template View)**

* Model : 데이터베이스에 저장되는 데이터의 영역
* Template(View) : 사용자에게 보여지는 영역
* View(Controller) : 프로그램 로직이 동작하여 적절한 처리 결과를 Template에게 전달하는 역할



#### 장고의 처리 흐름

![Django_flow](https://github.com/HWANG593/Web_programming/blob/master/images/Django_flow.png?raw=true)

* 웹 클라이언트의 요청을 받아 장고에서 MTV 모델에 따라 처리하는 과정이다
  * 클라이언트로부터 요청을 받으면 URLconf 모듈을 이용하여 URL을 분석한다.
  * URL 분석 결과를 통해 해당 URL에 매칭되는 뷰들을 실행한다.
  * 뷰는 자신의 로직을 실행하고, 데이터베이스 처리가 필요하면 모델을 통해 처리하고 그 결과를 반환 받는다.
  * 뷰는 자신의 로직 처리가 끝나면 템플릿을 사용하여 클라이언트에게 전송할 HTML 파일을 생성한다.
  * 뷰는 최종 결과로 HTML 파일을 클라이언트에게 보내 응답한다.



#### 장고 개발환경 구축 (가상 환경)

* **가상환경은 하나의 PC에서 프로젝트 별로 독립된 파이썬 실행 환경(runtime/interpreter)을 사용할 수 있도록 해준다.**

* 가상 환경을 사용하지 않으면 패키지의 버전 충동을 일으킬 소지가 생기기 때문에, 가상 환경을 구성하여 사용하는 것이 권장된다.